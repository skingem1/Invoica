[
  {
    "id": "TEST-003",
    "agent": "backend-core",
    "type": "feature",
    "priority": "high",
    "dependencies": [],
    "context": "Create a health check endpoint at /api/health that returns server status, uptime, version, and connected services status (database, redis). File: backend/src/api/health.ts. Use TypeScript strict mode, Zod for response validation, include JSDoc comments.",
    "deliverables": {
      "code": [
        "backend/src/api/health.ts"
      ],
      "tests": [
        "backend/tests/api/health.test.ts"
      ]
    },
    "status": "in_progress",
    "output": {
      "files": [
        "backend/src/api/health.ts",
        "backend/tests/api/health.test.ts",
        "backend/src/api/health.ts",
        "backend/tests/api/health.test.ts"
      ],
      "commit": "c3fc112",
      "model": "MiniMax-M2.5",
      "review": {
        "task_id": "TEST-003",
        "verdict": "REJECTED",
        "score": 35,
        "summary": "Code is incomplete with critical syntax errors and missing functionality. Main implementation file is truncated mid-function, test file is incomplete, and several architectural issues present.",
        "issues": [
          {
            "severity": "critical",
            "file": "backend/src/api/health.ts",
            "line": 150,
            "description": "File is truncated mid-function - incomplete implementation with syntax error 'const o'"
          },
          {
            "severity": "critical",
            "file": "backend/tests/api/health.test.ts",
            "line": 120,
            "description": "Test file is incomplete - cuts off mid-test case 'const response = await req'"
          },
          {
            "severity": "high",
            "file": "backend/src/api/health.ts",
            "line": 1,
            "description": "Missing default export - router is not exported, breaking import in tests"
          },
          {
            "severity": "high",
            "file": "backend/src/api/health.ts",
            "line": 20,
            "description": "Global PrismaClient instantiation - should use dependency injection or singleton pattern"
          },
          {
            "severity": "high",
            "file": "backend/src/api/health.ts",
            "line": 22,
            "description": "Global mutable Redis client - potential memory leaks and connection issues"
          },
          {
            "severity": "medium",
            "file": "backend/src/api/health.ts",
            "line": 35,
            "description": "Console.error for Redis connection failures - should use proper logging framework"
          },
          {
            "severity": "medium",
            "file": "backend/src/api/health.ts",
            "line": 150,
            "description": "Missing version retrieval from package.json - hardcoded or missing implementation"
          },
          {
            "severity": "medium",
            "file": "backend/src/api/health.ts",
            "line": 150,
            "description": "Missing HTTP status code handling - should return 503 for unhealthy status"
          },
          {
            "severity": "low",
            "file": "backend/src/api/health.ts",
            "line": 100,
            "description": "Function name 'getApplicationUptime' misleading - returns process uptime, not app uptime"
          }
        ],
        "strengths": [
          "Comprehensive Zod schema with proper TypeScript types",
          "Good JSDoc documentation on all functions",
          "Parallel execution of health checks for performance",
          "Proper error handling with typed error responses",
          "Well-structured test cases covering multiple scenarios",
          "Appropriate use of async/await patterns",
          "Good separation of concerns with individual health check functions"
        ],
        "action": "reject"
      }
    }
  }
]