{
  "tasks": [
    {
      "id": "FE-060",
      "agent": "frontend",
      "type": "feature",
      "priority": "critical",
      "dependencies": [],
      "context": "Create a developer docs layout at frontend/app/docs/layout.tsx. This is the shared layout wrapper for all /docs/* pages. It should be a server component that renders a sidebar navigation on the left (250px fixed width) and the children content on the right. The sidebar should have these nav links as <a> tags:\n\n- Getting Started → /docs/getting-started\n- Authentication → /docs/authentication\n- Invoices API → /docs/invoices\n- Settlements API → /docs/settlements\n- Webhooks → /docs/webhooks\n- SDK Reference → /docs/sdk-reference\n- Sandbox → /docs/sandbox\n\nUse a simple flexbox layout. Sidebar has a white background, border-right, padding 24px. Active link should be styled with font-weight bold and blue color. The layout accepts {children} and renders them in the main content area with max-width 800px and padding 32px. Export default function DocsLayout({ children }). Under 50 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/layout.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-061",
      "agent": "frontend",
      "type": "feature",
      "priority": "high",
      "dependencies": [],
      "context": "Create a developer docs Authentication page at frontend/app/docs/authentication/page.tsx. This page explains how to authenticate with the Invoica API. It is a server component that exports default function AuthenticationPage().\n\nContent sections (use h1, h2, p, and <pre><code> tags for code blocks):\n\n1. **h1: Authentication** — Brief intro: 'All API requests require a valid API key passed in the Authorization header.'\n2. **h2: API Key Format** — Explain keys start with 'inv_' followed by 32 hex chars. Show example: inv_a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6\n3. **h2: Using Your API Key** — Show a code block with a curl example: curl -H 'Authorization: Bearer inv_your_key_here' https://api.invoica.dev/v1/invoices\n4. **h2: SDK Authentication** — Show TypeScript code block: import { InvoicaClient } from '@invoica/sdk'; const client = new InvoicaClient({ apiKey: 'inv_your_key_here', baseUrl: 'https://api.invoica.dev' });\n5. **h2: Request Signing** — Brief explanation that requests can be signed with HMAC-SHA256 for additional security.\n\nKeep it clean and simple. Style code blocks with a gray background, padding, border-radius, and overflow-x auto. Under 60 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/authentication/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-062",
      "agent": "frontend",
      "type": "feature",
      "priority": "high",
      "dependencies": [],
      "context": "Create a developer docs Invoices API page at frontend/app/docs/invoices/page.tsx. This page documents the Invoice API endpoints. Server component, export default function InvoicesApiPage().\n\nContent sections with h1, h2, p, and code blocks:\n\n1. **h1: Invoices API** — Brief intro about creating and managing invoices.\n2. **h2: Create Invoice** — Method: POST /v1/invoices. Show JSON request body: { amount: 1000, currency: 'USD', description: 'API usage fee' }. Show JSON response: { id: 'inv_123', amount: 1000, currency: 'USD', status: 'pending', createdAt: '2026-02-15T10:00:00Z' }\n3. **h2: Get Invoice** — Method: GET /v1/invoices/:id. Show response same structure as above.\n4. **h2: List Invoices** — Method: GET /v1/invoices?limit=10&offset=0. Show response: { invoices: [...], total: 42, limit: 10, offset: 0 }\n5. **h2: Invoice Statuses** — Simple list: pending, processing, completed, failed. One sentence each explaining what they mean.\n\nStyle code blocks with gray background, padding, border-radius. Under 70 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/invoices/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-063",
      "agent": "frontend",
      "type": "feature",
      "priority": "high",
      "dependencies": [],
      "context": "Create a developer docs Settlements API page at frontend/app/docs/settlements/page.tsx. This page documents the Settlement API endpoints. Server component, export default function SettlementsApiPage().\n\nContent sections:\n\n1. **h1: Settlements API** — Brief intro: Settlements track the on-chain payment status of invoices.\n2. **h2: Get Settlement** — Method: GET /v1/settlements/:id. Show JSON response: { id: 'stl_abc', invoiceId: 'inv_123', status: 'completed', txHash: '0xabc...', chain: 'base', amount: 1000, currency: 'USD', confirmedAt: '2026-02-15T10:05:00Z' }\n3. **h2: List Settlements** — Method: GET /v1/settlements?limit=10&offset=0. Show response: { settlements: [...], total: 15, limit: 10, offset: 0 }\n4. **h2: Settlement Statuses** — List: pending (waiting for tx), processing (tx submitted), completed (confirmed on-chain), failed (tx reverted). One sentence each.\n\nStyle code blocks with gray background. Under 50 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/settlements/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-064",
      "agent": "frontend",
      "type": "feature",
      "priority": "high",
      "dependencies": [],
      "context": "Create a developer docs Webhooks page at frontend/app/docs/webhooks/page.tsx. This page documents webhook registration and event verification. Server component, export default function WebhooksPage().\n\nContent sections:\n\n1. **h1: Webhooks** — Brief intro: Receive real-time notifications when invoice and settlement events occur.\n2. **h2: Register a Webhook** — Method: POST /v1/webhooks. Request body: { url: 'https://your-app.com/webhook', events: ['invoice.created', 'settlement.completed'], secret: 'your_webhook_secret' }. Show response: { id: 'wh_123', url: '...', events: [...], active: true, createdAt: '...' }\n3. **h2: Event Types** — List all event types: invoice.created, invoice.paid, settlement.completed, settlement.failed, apikey.revoked. One sentence description each.\n4. **h2: Verifying Signatures** — Explain that each webhook request includes an X-Signature header with HMAC-SHA256. Show SDK code: import { constructEvent } from '@invoica/sdk'; const event = constructEvent(payload, signature, secret);\n5. **h2: Retry Policy** — Brief: Failed deliveries retried 3 times with exponential backoff.\n\nStyle code blocks with gray background. Under 65 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/webhooks/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-065",
      "agent": "frontend",
      "type": "feature",
      "priority": "medium",
      "dependencies": [],
      "context": "Create a developer docs SDK Reference page at frontend/app/docs/sdk-reference/page.tsx. This page shows a quick reference of all SDK methods. Server component, export default function SdkReferencePage().\n\nContent sections:\n\n1. **h1: SDK Reference** — Brief intro: The Invoica TypeScript SDK provides typed methods for all API endpoints.\n2. **h2: Installation** — Code block: npm install @invoica/sdk\n3. **h2: Client Methods** — A simple HTML table with 3 columns: Method, Parameters, Returns. Rows:\n   - createInvoice(params) | CreateInvoiceParams | Promise<Invoice>\n   - getInvoice(id) | string | Promise<Invoice>\n   - listInvoices(params?) | {limit?, offset?, status?} | Promise<InvoiceListResponse>\n   - getSettlement(id) | string | Promise<Settlement>\n   - listSettlements(params?) | {limit?, offset?} | Promise<SettlementListResponse>\n   - createApiKey(name) | string | Promise<ApiKeyCreateResponse>\n   - revokeApiKey(id) | string | Promise<void>\n   - listApiKeys() | — | Promise<ApiKey[]>\n   - registerWebhook(config) | WebhookRegistrationConfig | Promise<WebhookRegistration>\n   - listWebhooks() | — | Promise<WebhookListResponse>\n   - deleteWebhook(id) | string | Promise<void>\n4. **h2: Error Handling** — Brief code block showing try/catch with InvoicaError.\n\nStyle table with border-collapse, header background gray. Under 70 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/sdk-reference/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "FE-066",
      "agent": "frontend",
      "type": "feature",
      "priority": "medium",
      "dependencies": [],
      "context": "Create a developer docs Sandbox page at frontend/app/docs/sandbox/page.tsx. This page explains the sandbox testing environment. Server component, export default function SandboxPage().\n\nContent sections:\n\n1. **h1: Sandbox Environment** — Brief intro: Test your integration without processing real payments.\n2. **h2: Sandbox URL** — The sandbox base URL is https://sandbox.invoica.dev/v1. All API endpoints work the same as production but no real transactions are processed.\n3. **h2: Test API Keys** — Sandbox keys start with 'inv_test_' instead of 'inv_'. Generate one from the dashboard or use: inv_test_0000000000000000000000000000dead\n4. **h2: Test Scenarios** — A list of test behaviors:\n   - Amount 100 → always succeeds (settlement completes)\n   - Amount 999 → always fails (settlement fails)\n   - Amount 500 → delayed (settlement stays pending for 30 seconds)\n   - Amount 0 → validation error (400 Bad Request)\n5. **h2: Webhook Testing** — Use a tool like ngrok to expose a local endpoint, then register it as a sandbox webhook. Events fire immediately in sandbox mode.\n\nKeep it clean and informative. Under 55 lines total.",
      "deliverables": {
        "code": [
          "frontend/app/docs/sandbox/page.tsx"
        ],
        "tests": []
      },
      "status": "pending"
    },
    {
      "id": "BE-120",
      "agent": "backend-core",
      "type": "feature",
      "priority": "medium",
      "dependencies": [],
      "context": "Create a sandbox mode utility at backend/src/utils/sandbox.ts. This module provides sandbox/test mode detection and test scenario simulation.\n\nExport these items:\n\n(1) export function isSandboxKey(apiKey: string): boolean — returns true if apiKey starts with 'inv_test_'.\n(2) export function getSandboxScenario(amount: number): 'success' | 'failure' | 'delayed' | 'validation_error' — returns: 'success' if amount === 100, 'failure' if amount === 999, 'delayed' if amount === 500, 'validation_error' if amount <= 0, 'success' for all other amounts.\n(3) export const SANDBOX_BASE_URL = 'https://sandbox.invoica.dev/v1';\n(4) export const SANDBOX_TEST_KEY = 'inv_test_0000000000000000000000000000dead';\n\nFile should be under 25 lines. Pure functions, no external dependencies.",
      "deliverables": {
        "code": [
          "backend/src/utils/sandbox.ts"
        ],
        "tests": [
          "backend/src/utils/__tests__/sandbox.test.ts"
        ]
      },
      "status": "pending"
    },
    {
      "id": "BE-121",
      "agent": "backend-core",
      "type": "feature",
      "priority": "medium",
      "dependencies": [],
      "context": "Create a request validation middleware at backend/src/middleware/request-validator.ts. This Express middleware validates incoming API request bodies using simple schema checks. No external validation libraries (no Joi, no Zod).\n\nExport these items:\n\n(1) export interface ValidationRule { field: string; type: 'string' | 'number' | 'boolean'; required?: boolean; min?: number; max?: number; }\n(2) export function validateBody(rules: ValidationRule[]): Express RequestHandler middleware. For each rule, check req.body[field]: if required and missing → 400 { error: 'validation_error', message: `${field} is required` }. If present but wrong type → 400 { error: 'validation_error', message: `${field} must be a ${type}` }. If number and min/max set, validate range. If all pass, call next().\n(3) export function validateInvoiceCreate(): RequestHandler — pre-configured validateBody with rules: amount (number, required, min: 1), currency (string, required), description (string, optional).\n\nImport { Request, Response, NextFunction, RequestHandler } from 'express'. Under 50 lines total.",
      "deliverables": {
        "code": [
          "backend/src/middleware/request-validator.ts"
        ],
        "tests": [
          "backend/src/middleware/__tests__/request-validator.test.ts"
        ]
      },
      "status": "pending"
    }
  ]
}
